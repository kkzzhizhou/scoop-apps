{
    "version": "6.12.0",
    "description": "Tiny alternative Discord client with a smaller footprint, themes and plugins, multi-profile, and more!",
    "homepage": "https://github.com/SpikeHD/Dorion",
    "license": {
        "identifier": "GPL-3.0",
        "url": "https://github.com/SpikeHD/Dorion/blob/main/LICENSE"
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/SpikeHD/Dorion/releases/download/v6.12.0/Dorion_6.12.0_win64_portable.zip",
            "hash": "e8b6fd3055b1c73ae8fb0f178566b0f2dd7c6be2a4873438b9367f0231d9ede3"
        },
        "arm64": {
            "url": "https://github.com/SpikeHD/Dorion/releases/download/v6.12.0/Dorion_6.12.0_win_arm64_portable.zip",
            "hash": "b1b1e24fab22b68981794da199f8d640538a01e1f579cc31aeec92a0019be6b9"
        }
    },
    "pre_install": [
        "$files = @('config.json', 'detectables.json')",
        "if (-not (Test-Path -Path $persist_dir)) {",
        "    New-Item -Path $persist_dir -ItemType Directory",
        "}",
        "foreach ($file in $files) {",
        "    if (-not (Test-Path -Path (Join-Path $persist_dir $file))) {",
        "        New-Item -Path (Join-Path $persist_dir $file)",
        "    }",
        "}"
    ],
    "post_install": [
        "$sourceFolders = @(\"~\\dorion\", \"$env:APPDATA\\dorion\")",
        "$canMoveFolders = $false",
        "foreach ($sourceFolder in $sourceFolders) {",
        "    If (Test-Path -Path \"$sourceFolder\\*\") {$canMoveFolders = $true; break}",
        "}",
        "If ($canMoveFolders) {",
        "    $confirm = Read-Host -Prompt \"Do you want to move the current data to '$persist_dir'? (Y/N)\"",
        "    If ($confirm.ToUpper() -eq \"Y\") {",
        "        foreach ($sourceFolder in $sourceFolders) {",
        "            If (Test-Path -Path \"$sourceFolder\") {",
        "                If (Test-Path -Path \"$sourceFolder\") {Move-Item -Path \"$sourceFolder\\*\" -Destination \"$persist_dir\" -Force}",
        "                Remove-Item \"$sourceFolder\" -Force -Recurse",
        "            }",
        "        }",
        "    }",
        "}",
        "Remove-Item \"$dir\\*.original\" -Force -Recurse"
    ],
    "persist": [
        "config.json",
        "detectables.json",
        "plugins",
        "logs",
        "themes",
        "profiles",
        "extensions"
    ],
    "checkver": "github",
    "autoupdate": {
        "extract_dir": "Dorion_$version_win64_portable",
        "architecture": {
            "64bit": {
                "url": "https://github.com/SpikeHD/Dorion/releases/download/v$version/Dorion_$version_win64_portable.zip"
            },
            "arm64": {
                "url": "https://github.com/SpikeHD/Dorion/releases/download/v$version/Dorion_$version_win_arm64_portable.zip"
            }
        }
    },
    "shortcuts": [
        [
            "Dorion.exe",
            "Dorion"
        ]
    ]
}
