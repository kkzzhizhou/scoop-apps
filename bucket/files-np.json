{
    "version": "4.0.0.0",
    "homepage": "https://files.community/",
    "description": "A modern file manager that helps users organize their files and folders.",
    "license": "MIT",
    "architecture": {
        "64bit": {
            "url": "https://cdn.files.community/files/stable/Files.Package_4.0.0.0_Test/Files.Package_4.0.0.0_x64_arm64.msixbundle",
            "hash": "78bfc3fb7c0b71cae6f360de8fcdde670c8363a031a771db68a01280ba9707c8"
        }
    },
    "installer": {
        "script": "Add-AppxPackage -Path \"$dir\\$fname\""
    },
    "post_install": "Remove-Item \"$dir\\$fname\"",
    "uninstaller": {
        "script": "Get-AppxPackage 'Files' | Remove-AppxPackage"
    },
    "checkver": {
        "script": [
            "try {",
            "  $latest = Invoke-WebRequest -Uri 'https://api.github.com/repos/files-community/Files/releases/latest'",
            "  $tag_name = ($latest.Content | ConvertFrom-Json).tag_name -replace 'v', ''",
            "  $tag_ver = [System.Version]::Parse($tag_name)",
            "  $major = if ($tag_ver.Major -eq -1) { 0 } else { $tag_ver.Major }",
            "  $minor = if ($tag_ver.Minor -eq -1) { 0 } else { $tag_ver.Minor }",
            "  $build = if ($tag_ver.Build -eq -1) { 0 } else { $tag_ver.Build }",
            "  $revision = if ($tag_ver.Revision -eq -1) { 0 } else { $tag_ver.Revision }",
            "  Write-Output \"$major.$minor.$build.$revision\"",
            "} catch { error $_.Exception.Message; throw }"
        ],
        "regex": "(\\d.+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://cdn.files.community/files/stable/Files.Package_$version_Test/Files.Package_$version_x64_arm64.msixbundle"
            }
        }
    }
}
