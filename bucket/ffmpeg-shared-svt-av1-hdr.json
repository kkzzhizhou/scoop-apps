{
    "version": "N-122272-g224b3ff82a",
    "description": "A complete, cross-platform solution to record, convert and stream audio and video build with SVT-AV1-HDR.",
    "homepage": "https://github.com/QuickFatHedgehog/FFmpeg-Builds-SVT-AV1-HDR",
    "license": "GPL-3.0-or-later",
    "architecture": {
        "64bit": {
            "url": "https://github.com/QuickFatHedgehog/FFmpeg-Builds-SVT-AV1-HDR/releases/download/autobuild-2025-12-27-22-48/ffmpeg-N-122272-g224b3ff82a-win64-gpl-shared.zip",
            "hash": "7eca13a89e713d1d43e0340b302883bc51fc2ede8d9e0dfa6dc25ddc016aad33",
            "extract_dir": "ffmpeg-N-122272-g224b3ff82a-win64-gpl-shared"
        },
        "arm64": {
            "url": "https://github.com/QuickFatHedgehog/FFmpeg-Builds-SVT-AV1-HDR/releases/download/autobuild-2025-12-27-22-48/ffmpeg-N-122272-g224b3ff82a-winarm64-gpl-shared.zip",
            "hash": "2f4fd22bf1b138a9eeb1275b4c4dfa59a0dfb2e2a2df6f35f7af8e29d30790d7",
            "extract_dir": "ffmpeg-N-122272-g224b3ff82a-winarm64-gpl-shared"
        }
    },
    "post_install": [
        "# Workaround for https://github.com/ScoopInstaller/Main/issues/2611",
        "Remove-Item \"$scoopdir\\shims\\ffmpeg.ps1\", \"$scoopdir\\shims\\ffplay.ps1\", \"$scoopdir\\shims\\ffprobe.ps1\" -ErrorAction SilentlyContinue"
    ],
    "persist": "fonts",
    "bin": [
        [
            "bin\\ffmpeg.exe",
            "ffmpeg-svt-av1-hdr"
        ],
        [
            "bin\\ffplay.exe",
            "ffplay-svt-av1-hdr"
        ],
        [
            "bin\\ffprobe.exe",
            "ffprobe-svt-av1-hdr"
        ]
    ],
    "checkver": {
        "script": [
            "$rel_info = Invoke-RestMethod -Uri 'https://api.github.com/repos/QuickFatHedgehog/FFmpeg-Builds-SVT-AV1-HDR/releases'",
            "$latest = $rel_info | Where-Object {$_.tag_name -ne 'latest'} | Sort-Object {$_.published_at} | Select-Object -last 1",
            "$latest_assets = $latest.assets | Where-Object {$_.name.StartsWith('ffmpeg-N-')}",
            "$latest_x64 = $latest_assets | Where-Object {$_.name.EndsWith('-win64-gpl-shared.zip')} | Select-Object -first 1",
            "$latest_arm64 = $latest_assets | Where-Object {$_.name.EndsWith('-winarm64-gpl-shared.zip ')} | Select-Object -first 1",
            "$version = 'unknown'; if ($latest_x64.name -match 'ffmpeg-(.+?)-win64') {$version = $Matches[1]}",
            "Write-Output $version $latest.tag_name $latest_x64.digest $latest_arm64.digest"
        ],
        "regex": "(?<version>N-\\d+-g[\\d\\w]+)\\s(?<tag>autobuild-[\\d-]+)\\s(?<x64hash>[^\\s]+)?\\s(?<armhash>[^\\s]+)?"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/QuickFatHedgehog/FFmpeg-Builds-SVT-AV1-HDR/releases/download/$matchTag/ffmpeg-$version-win64-gpl-shared.zip",
                "hash": "$matchX64hash",
                "extract_dir": "ffmpeg-$version-win64-gpl-shared"
            },
            "arm64": {
                "url": "https://github.com/QuickFatHedgehog/FFmpeg-Builds-SVT-AV1-HDR/releases/download/$matchTag/ffmpeg-$version-winarm64-gpl-shared.zip",
                "hash": "$matchArmhash",
                "extract_dir": "ffmpeg-$version-winarm64-gpl-shared"
            }
        }
    }
}
