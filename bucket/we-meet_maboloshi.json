{
    "version": "3.41.1.433",
    "description": "tencent meeting",
    "homepage": "https://meeting.tencent.com/index.html",
    "license": {
        "identifier": "Proprietary",
        "url": "https://rule.tencent.com/rule/ab9ea528-0bf1-47b3-a8c3-f001b98912e2"
    },
    "architecture": {
        "64bit": {
            "url": "https://updatecdn.meeting.qq.com/cos/e133042ae871916a8052729b51d5e3bc/TencentMeeting_0300000000_3.41.1.433_x86_64.publish.officialwebsite.exe#/dl.7z",
            "hash": "md5:e133042ae871916a8052729b51d5e3bc"
        }
    },
    "installer": {
        "script": [
            "Get-Item \"$dir\\`$_*_\" | Rename-Item -NewName \"$version\"",
            "Move-Item \"$dir\\wemeetapp_new.exe\" \"$dir\\WeMeet.exe\"",
            "Remove-Item -R -Path \"$dir\\`$WINDIR\",\"$dir\\`$PLUGINSDIR\",\"$dir\\`$TEMP\",\"$dir\\wemeetapp.exe\""
        ]
    },
    "shortcuts": [
        [
            "WeMeet.exe",
            "腾讯会议"
        ]
    ],
    "post_install": [
        "Get-ChildItem \"$bucketsdir\\$bucket\\scripts\\$app\\*.ps1\" | ForEach-Object {",
        "    $content = Get-Content $_",
        "    $content = $content.Replace('$WeMeetPath', $dir)",
        "    if ($global) {",
        "        $content = $content.Replace('HKCU', 'HKLM')",
        "    }",
        "    Set-Content -Path \"$dir\\$($_.Name)\" $content -Encoding UTF8",
        "}",
        "& \"$dir\\install-wemeet-url-protocol.ps1\""
    ],
    "pre_uninstall": [
        "if ($cmd -eq 'uninstall') {",
        "    Write-Host `n'正在取消注册腾讯会议协议...'",
        "    if ($global) {",
        "       Remove-Item 'HKLM:\\SOFTWARE\\Classes\\wemeet' -ErrorAction 'SilentlyContinue' -Recurse -Force",
        "    } else {",
        "       Remove-Item 'HKCU:\\SOFTWARE\\Classes\\wemeet' -ErrorAction 'SilentlyContinue' -Recurse -Force",
        "    }",
        "    Write-Host '腾讯会议协议取消注册完成！' -ForegroundColor Green",
        "}"
    ],
    "checkver": {
        "url": "https://meeting.tencent.com/web-service/query-download-info?q=%5B%7B%22package-type%22:%22app%22,%22channel%22:%220300000000%22,%22platform%22:%22windows%22,%22arch%22:%22x86_64%22%7D%5D&nonce=AAAAAAAAAAAAAAAA",
        "regex": "\"md5\":\"(?<hash>[a-f0-9]+)\".+\"version\":\"([\\d\\.]+)\""
    },
    "##": "更新链接来自: https://github.com/SpecterShell/Dumplings/blob/main/Tasks/#Tencent.TencentMeeting#1/Script.ps1",
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://updatecdn.meeting.qq.com/cos/$matchHash/TencentMeeting_0300000000_$version_x86_64.publish.officialwebsite.exe#/dl.7z",
                "hash": {
                    "mode": "json",
                    "url": "https://meeting.tencent.com/web-service/query-download-info?q=%5B%7B%22package-type%22:%22app%22,%22channel%22:%220300000000%22,%22platform%22:%22windows%22,%22arch%22:%22x86_64%22%7D%5D&nonce=AAAAAAAAAAAAAAAA",
                    "jp": "$.info-list[0].md5"
                }
            }
        }
    }
}
