{
    "homepage": "https://getwacup.com/",
    "version": "1.99.43.23234",
    "description": "The WinAmp Community Update Project (WACUP) is designed to work only with the patched Winamp 5.666 release to provide bug fixes, updates of existing features and most importantly new features with the goal to eventually become it's own highly Winamp compatible media player.",
    "architecture": {
        "32bit": {
            "url": "https://getwacup.com/preview/WACUP_Preview_v1_99_43_23234_x86.exe",
            "hash": "ae4b0c39ecd6871bf24e972fb7854f8ddebc0c877585237bc4b8951a9cc2ca6a"
        },
        "64bit": {
            "url": "https://getwacup.com/preview_x64/WACUP_Preview_v1_99_43_23234_x64.exe",
            "hash": "1f27dc1093421074acc789288af176d5ae579cc12da90929887388c319e7ba75"
        }
    },
    "pre_install": [
        "function create($path, $type, $content) {",
        "   if (-not (Test-Path \"$path\")) {",
        "       New-Item \"$path\" -ItemType $type -Value $content | Out-Null",
        "       Write-Output \"Creating $path...\"",
        "   }",
        "}",
        "create $dir/Profile Directory",
        "create $dir/paths.ini File \"[WACUP]`ninidir=.\\Profile`nportable=1\""
    ],
    "installer": {
        "script": [
            "push-location $dir",
            "sudo ./$fname /S /PORTABLE /D=$dir",
            "$processName = \"wacup\"",
            "Stop-Process -Name $processName -ErrorAction SilentlyContinue",
            "do {",
            "    $process = Get-Process $processName -ErrorAction SilentlyContinue",
            "    Start-Sleep 1",
            "} until ($process -ne $Null)",
            "$process | Stop-Process -ErrorAction SilentlyContinue",
            "pop-location"
        ]
    },
    "bin": "wacup.exe",
    "shortcuts": [
        [
            "wacup.exe",
            "Winamp"
        ]
    ],
    "persist": "Profile",
    "depends": "gsudo",
    "notes": "Requires elevation for now",
    "checkver": {
        "url": "https://getwacup.com/",
        "regex": "Preview v(?<version>[\\d.]+)"
    },
    "autoupdate": {
        "architecture": {
            "32bit": {
                "url": "https://getwacup.com/preview/WACUP_Preview_v$underscoreVersion_x86.exe",
                "hash": {
                    "url": "https://getwacup.com/preview/WACUP_Preview_v$underscoreVersion_x86.exe.sha256",
                    "regex": "$sha256"
                }
            },
            "64bit": {
                "url": "https://getwacup.com/preview_x64/WACUP_Preview_v$underscoreVersion_x64.exe",
                "hash": {
                    "url": "https://getwacup.com/preview_x64/WACUP_Preview_v$underscoreVersion_x64.exe.sha256",
                    "regex": "$sha256"
                }
            }
        }
    }
}
