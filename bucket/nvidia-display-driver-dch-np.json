{
    "##": [
        "NOTES on checkver: ",
        "query inputs for https://www.nvidia.com/Download/processFind.aspx consists of:",
        "psid: product series ID (131: GeForce RTX 50 Series), see: https://www.nvidia.com/Download/API/lookupValueSearch.aspx?TypeID=2",
        "pfid: product ID, see https://www.nvidia.com/Download/API/lookupValueSearch.aspx?TypeID=3",
        "osid: operating system ID (57: Windows 10 64-bit), see https://www.nvidia.com/Download/API/lookupValueSearch.aspx?TypeID=4",
        "lid: language ID (US English == 1), see https://www.nvidia.com/Download/API/lookupValueSearch.aspx?TypeID=5"
    ],
    "version": "591.86",
    "description": "NVIDIA GeForce Game Ready WHQL driver",
    "homepage": "https://www.nvidia.com/Download/index.aspx",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.nvidia.com/en-us/drivers/geforce-license/"
    },
    "architecture": {
        "64bit": {
            "url": "https://us.download.nvidia.com/Windows/591.86/591.86-desktop-win10-win11-64bit-international-dch-whql.exe#/dl.7z_",
            "hash": "a50c89c9d254f33cc8a8e638f7cc1981a76263005fcec102ad8c8b45626d53e0"
        }
    },
    "installer": {
        "script": [
            "if(!(is_admin)) { error 'This package requires admin rights to install'; break }",
            "if ([environment]::OSVersion.Version.Major -lt 10) { error 'This package requires Windows 10/11 to install'; break }",
            "",
            "New-Item \"$dir\\extract\", \"$dir\\setup\" -ItemType Directory | Out-Null",
            "Expand-7zipArchive \"$dir\\dl.7z_\" \"$dir\\extract\" -Removal | Out-Null",
            "# Move everything we want",
            "Move-Item \"$dir\\extract\\Display.Driver\" -Destination \"$dir\\setup\"",
            "Move-Item \"$dir\\extract\\HDAudio\" -Destination \"$dir\\setup\"",
            "Move-Item \"$dir\\extract\\NVI2\" -Destination \"$dir\\setup\"",
            "Move-Item \"$dir\\extract\\NVPCF\" -Destination \"$dir\\setup\"",
            "Move-Item \"$dir\\extract\\PhysX\" -Destination \"$dir\\setup\"",
            "Move-Item \"$dir\\extract\\*.txt\" -Destination \"$dir\\setup\"",
            "Move-Item \"$dir\\extract\\setup.*\" -Destination \"$dir\\setup\"",
            "# The installer will not run without these legal files",
            "New-Item \"$dir\\setup\\NvApp\" -ItemType Directory | Out-Null",
            "Move-Item \"$dir\\extract\\NvApp\\EULA\" -Destination \"$dir\\setup\\NvApp\"",
            "Move-Item \"$dir\\extract\\NvApp\\PrivacyPolicy\" -Destination \"$dir\\setup\\NvApp\"",
            "Move-Item \"$dir\\extract\\NvApp\\Unified_EULA\" -Destination \"$dir\\setup\\NvApp\"",
            "Move-Item \"$dir\\extract\\NvApp\\*.txt\" -Destination \"$dir\\setup\\NvApp\"",
            "",
            "$success = Invoke-ExternalCommand -Path \"$dir\\setup\\setup.exe\" @Args('-s', '-noreboot', \"-log:$dir\\logs\", '-loglevel:4')",
            "Remove-Item \"$dir\\extract\", \"$dir\\setup\" -Force -Recurse",
            "if (!$success) { error \"setup.exe failed, check logs at '$dir\\logs'\" ; break }",
            "Remove-Item \"$dir\\logs\" -Force -Recurse"
        ]
    },
    "checkver": {
        "url": "https://gfwsl.geforce.com/services_toolkit/services/com/nvidia/services/AjaxDriverService.php?func=DriverManualLookup&psid=131&osID=57&languageCode=1033&beta=0&isWHQL=1&dltype=-1&dch=1&upCRD=0&sort1=0&numberOfResults=1",
        "regex": "\"Version\"\\s?:\\s?\"(?<version>[\\d.]+)\".*\"DownloadURL\"\\s?:\\s?\"https://us.download.nvidia.com/(?<path>[^\"]*)\""
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://us.download.nvidia.com/$matchPath#/dl.7z_"
            }
        }
    }
}
